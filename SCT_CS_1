def encrypt_caesar(text, shift):
    """Encrypts the given text using the Caesar cipher."""
    result = ""
    for char in text:
        if char.isalpha():
            # Determine the starting character (A or a) for the alphabet
            start_char = 'A' if char.isupper() else 'a'
            # Convert character to a number (0-25) relative to the start_char
            char_code = ord(char) - ord(start_char)
            # Apply the shift and use the modulo operator (%) to wrap around the alphabet
            shifted_code = (char_code + shift) % 26
            # Convert the number back to a character
            new_char = chr(shifted_code + ord(start_char))
            result += new_char
        elif char.isdigit():
            # Handle digits by applying the shift (0-9)
            # Use modulo 10 to wrap around 0-9
            new_digit = str((int(char) + shift) % 10)
            result += new_digit
        else:
            # Keep non-alphanumeric characters (spaces, punctuation) as they are
            result += char
    return result

def decrypt_caesar(text, shift):
    """Decrypts the given ciphertext using the Caesar cipher.
    Decryption is simply encryption with a negative shift."""
    # To decrypt, we apply the inverse shift
    # Note: (x - shift) % 26 is equivalent to (x + (-shift)) % 26
    # Python's % handles negative numbers correctly for the purpose of decryption.
    return encrypt_caesar(text, -shift)

def main():
    """Main function to handle user input and program flow."""
    print("âœ¨ Welcome to the Caesar Cipher Program! âœ¨")

    while True:
        # Get operation choice from user
        print("\n---")
        print("What would you like to do?")
        print("1. Encrypt a message")
        print("2. Decrypt a message")
        print("3. Exit")

        choice = input("Enter your choice (1, 2, or 3): ")

        if choice == '3':
            print("Goodbye! ðŸ‘‹")
            break

        if choice not in ['1', '2']:
            print("Invalid choice. Please enter 1, 2, or 3.")
            continue

        # Get message and shift value
        message = input("Enter the message: ")
       
        try:
            # The shift value must be an integer
            shift = int(input("Enter the shift value (e.g., 3 for a C-D-E shift): "))
        except ValueError:
            print("Invalid shift value. Please enter an integer.")
            continue
           
        print("---")

        # Perform the chosen operation
        if choice == '1':
            encrypted_message = encrypt_caesar(message, shift)
            print(f"**Original Message:** {message}")
            print(f"**Shift Value:** {shift}")
            print(f"**Encrypted Message:** {encrypted_message}")
       
        elif choice == '2':
            # Note: The 'shift' entered for decryption should be the original encryption key.
            decrypted_message = decrypt_caesar(message, shift)
            print(f"**Ciphertext:** {message}")
            print(f"**Shift Value (Key):** {shift}")
            print(f"**Decrypted Message:** {decrypted_message}")

# Execute the main function when the script is run
if __name__ == "__main__":
    main()
